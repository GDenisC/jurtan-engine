{"version":3,"file":"gamesave.js","sourceRoot":"je-src/","sources":["advanced/gamesave.ts"],"names":[],"mappings":"AAAA,OAAO,EAAE,KAAK,EAAE,MAAM,YAAY,CAAC;AAEnC,MAAM,CAAC,MAAM,SAAS,GAAG;IACrB,IAAI,EAAE,CAAC,GAAW,EAAE,EAAE,CAAC,YAAY,CAAC,OAAO,CAAC,GAAG,CAAC;IAChD,IAAI,EAAE,CAAC,GAAW,EAAE,KAAa,EAAE,EAAE,CAAC,YAAY,CAAC,OAAO,CAAC,GAAG,EAAE,KAAK,CAAC;IACtE,MAAM,EAAE,CAAC,GAAW,EAAE,EAAE,CAAC,YAAY,CAAC,UAAU,CAAC,GAAG,CAAC;IAErD,QAAQ,EAAE,CAAC,GAAW,EAAE,EAAE;QACtB,MAAM,KAAK,GAAG,YAAY,CAAC,OAAO,CAAC,GAAG,CAAC,CAAC;QACxC,IAAI,CAAC,KAAK;YAAE,OAAO,IAAI,CAAC;QACxB,OAAO,IAAI,CAAC,KAAK,CAAC,KAAK,CAAC,YAAY,CAAC,KAAK,CAAC,OAAO,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC;IAChE,CAAC;IACD,QAAQ,EAAE,CAAC,GAAW,EAAE,KAAU,EAAE,EAAE,CAAC,SAAS,CAAC,IAAI,CAAC,GAAG,EAAE,KAAK,CAAC,OAAO,CAAC,KAAK,CAAC,YAAY,CAAC,IAAI,CAAC,SAAS,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC;IAEpH,SAAS,EAAE,GAAG,EAAE,CAAC,YAAY,CAAC,KAAK,EAAE;CAC/B,CAAC;AAEX,MAAM,OAAO,QAAQ;IAGjB,YAAqB,MAAc;QAAd,WAAM,GAAN,MAAM,CAAQ;QAC/B,MAAM,KAAK,GAAG,SAAS,CAAC,QAAQ,CAAC,MAAM,CAAC,CAAC;QACzC,IAAI,CAAC,IAAI,GAAG,CAAC,KAAK,IAAI,IAAI,CAAC,CAAC,CAAC,CAAC,KAAK,CAAC,CAAC,CAAC,EAAE,CAAC;IAC7C,CAAC;IAED,OAAO;QACH,SAAS,CAAC,QAAQ,CAAC,IAAI,CAAC,MAAM,EAAE,IAAI,CAAC,IAAI,CAAC,CAAC;IAC/C,CAAC;CACJ","sourcesContent":["import { Crypt } from \"./crypt.js\";\n\nexport const GameSaves = {\n    load: (key: string) => localStorage.getItem(key),\n    save: (key: string, value: string) => localStorage.setItem(key, value),\n    delete: (key: string) => localStorage.removeItem(key),\n\n    loadJson: (key: string) => {\n        const value = localStorage.getItem(key);\n        if (!value) return null;\n        return JSON.parse(Crypt.decodeBase64(Crypt.reverse(value)));\n    },\n    saveJson: (key: string, value: any) => GameSaves.save(key, Crypt.reverse(Crypt.encodeBase64(JSON.stringify(value)))),\n\n    deleteAll: () => localStorage.clear()\n} as const;\n\nexport class GameSave<T = any> {\n    data: T;\n\n    constructor(readonly gameId: string) {\n        const saves = GameSaves.loadJson(gameId);\n        this.data = (saves != null) ? saves : {};\n    }\n\n    saveAll() {\n        GameSaves.saveJson(this.gameId, this.data);\n    }\n}"]}