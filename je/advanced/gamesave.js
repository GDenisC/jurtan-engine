import { Crypt } from "./crypt.js";
export const GameSaves = {
    load: (key) => localStorage.getItem(key),
    save: (key, value) => localStorage.setItem(key, value),
    delete: (key) => localStorage.removeItem(key),
    loadJson: (key) => {
        const value = localStorage.getItem(key);
        if (!value)
            return null;
        return JSON.parse(Crypt.decodeBase64(Crypt.reverse(value)));
    },
    saveJson: (key, value) => GameSaves.save(key, Crypt.reverse(Crypt.encodeBase64(JSON.stringify(value)))),
    deleteAll: () => localStorage.clear()
};
export class GameSave {
    constructor(gameId) {
        this.gameId = gameId;
        const saves = GameSaves.loadJson(gameId);
        this.data = (saves != null) ? saves : {};
    }
    saveAll() {
        GameSaves.saveJson(this.gameId, this.data);
    }
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiZ2FtZXNhdmUuanMiLCJzb3VyY2VSb290IjoiamUtc3JjLyIsInNvdXJjZXMiOlsiYWR2YW5jZWQvZ2FtZXNhdmUudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUEsT0FBTyxFQUFFLEtBQUssRUFBRSxNQUFNLFlBQVksQ0FBQztBQUVuQyxNQUFNLENBQUMsTUFBTSxTQUFTLEdBQUc7SUFDckIsSUFBSSxFQUFFLENBQUMsR0FBVyxFQUFFLEVBQUUsQ0FBQyxZQUFZLENBQUMsT0FBTyxDQUFDLEdBQUcsQ0FBQztJQUNoRCxJQUFJLEVBQUUsQ0FBQyxHQUFXLEVBQUUsS0FBYSxFQUFFLEVBQUUsQ0FBQyxZQUFZLENBQUMsT0FBTyxDQUFDLEdBQUcsRUFBRSxLQUFLLENBQUM7SUFDdEUsTUFBTSxFQUFFLENBQUMsR0FBVyxFQUFFLEVBQUUsQ0FBQyxZQUFZLENBQUMsVUFBVSxDQUFDLEdBQUcsQ0FBQztJQUVyRCxRQUFRLEVBQUUsQ0FBQyxHQUFXLEVBQUUsRUFBRTtRQUN0QixNQUFNLEtBQUssR0FBRyxZQUFZLENBQUMsT0FBTyxDQUFDLEdBQUcsQ0FBQyxDQUFDO1FBQ3hDLElBQUksQ0FBQyxLQUFLO1lBQUUsT0FBTyxJQUFJLENBQUM7UUFDeEIsT0FBTyxJQUFJLENBQUMsS0FBSyxDQUFDLEtBQUssQ0FBQyxZQUFZLENBQUMsS0FBSyxDQUFDLE9BQU8sQ0FBQyxLQUFLLENBQUMsQ0FBQyxDQUFDLENBQUM7SUFDaEUsQ0FBQztJQUNELFFBQVEsRUFBRSxDQUFDLEdBQVcsRUFBRSxLQUFVLEVBQUUsRUFBRSxDQUFDLFNBQVMsQ0FBQyxJQUFJLENBQUMsR0FBRyxFQUFFLEtBQUssQ0FBQyxPQUFPLENBQUMsS0FBSyxDQUFDLFlBQVksQ0FBQyxJQUFJLENBQUMsU0FBUyxDQUFDLEtBQUssQ0FBQyxDQUFDLENBQUMsQ0FBQztJQUVwSCxTQUFTLEVBQUUsR0FBRyxFQUFFLENBQUMsWUFBWSxDQUFDLEtBQUssRUFBRTtDQUMvQixDQUFDO0FBRVgsTUFBTSxPQUFPLFFBQVE7SUFHakIsWUFBcUIsTUFBYztRQUFkLFdBQU0sR0FBTixNQUFNLENBQVE7UUFDL0IsTUFBTSxLQUFLLEdBQUcsU0FBUyxDQUFDLFFBQVEsQ0FBQyxNQUFNLENBQUMsQ0FBQztRQUN6QyxJQUFJLENBQUMsSUFBSSxHQUFHLENBQUMsS0FBSyxJQUFJLElBQUksQ0FBQyxDQUFDLENBQUMsQ0FBQyxLQUFLLENBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FBQztJQUM3QyxDQUFDO0lBRUQsT0FBTztRQUNILFNBQVMsQ0FBQyxRQUFRLENBQUMsSUFBSSxDQUFDLE1BQU0sRUFBRSxJQUFJLENBQUMsSUFBSSxDQUFDLENBQUM7SUFDL0MsQ0FBQztDQUNKIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgQ3J5cHQgfSBmcm9tIFwiLi9jcnlwdC5qc1wiO1xuXG5leHBvcnQgY29uc3QgR2FtZVNhdmVzID0ge1xuICAgIGxvYWQ6IChrZXk6IHN0cmluZykgPT4gbG9jYWxTdG9yYWdlLmdldEl0ZW0oa2V5KSxcbiAgICBzYXZlOiAoa2V5OiBzdHJpbmcsIHZhbHVlOiBzdHJpbmcpID0+IGxvY2FsU3RvcmFnZS5zZXRJdGVtKGtleSwgdmFsdWUpLFxuICAgIGRlbGV0ZTogKGtleTogc3RyaW5nKSA9PiBsb2NhbFN0b3JhZ2UucmVtb3ZlSXRlbShrZXkpLFxuXG4gICAgbG9hZEpzb246IChrZXk6IHN0cmluZykgPT4ge1xuICAgICAgICBjb25zdCB2YWx1ZSA9IGxvY2FsU3RvcmFnZS5nZXRJdGVtKGtleSk7XG4gICAgICAgIGlmICghdmFsdWUpIHJldHVybiBudWxsO1xuICAgICAgICByZXR1cm4gSlNPTi5wYXJzZShDcnlwdC5kZWNvZGVCYXNlNjQoQ3J5cHQucmV2ZXJzZSh2YWx1ZSkpKTtcbiAgICB9LFxuICAgIHNhdmVKc29uOiAoa2V5OiBzdHJpbmcsIHZhbHVlOiBhbnkpID0+IEdhbWVTYXZlcy5zYXZlKGtleSwgQ3J5cHQucmV2ZXJzZShDcnlwdC5lbmNvZGVCYXNlNjQoSlNPTi5zdHJpbmdpZnkodmFsdWUpKSkpLFxuXG4gICAgZGVsZXRlQWxsOiAoKSA9PiBsb2NhbFN0b3JhZ2UuY2xlYXIoKVxufSBhcyBjb25zdDtcblxuZXhwb3J0IGNsYXNzIEdhbWVTYXZlPFQgPSBhbnk+IHtcbiAgICBkYXRhOiBUO1xuXG4gICAgY29uc3RydWN0b3IocmVhZG9ubHkgZ2FtZUlkOiBzdHJpbmcpIHtcbiAgICAgICAgY29uc3Qgc2F2ZXMgPSBHYW1lU2F2ZXMubG9hZEpzb24oZ2FtZUlkKTtcbiAgICAgICAgdGhpcy5kYXRhID0gKHNhdmVzICE9IG51bGwpID8gc2F2ZXMgOiB7fTtcbiAgICB9XG5cbiAgICBzYXZlQWxsKCkge1xuICAgICAgICBHYW1lU2F2ZXMuc2F2ZUpzb24odGhpcy5nYW1lSWQsIHRoaXMuZGF0YSk7XG4gICAgfVxufSJdfQ==