import { getCanvasInstance } from "./canvas.js";
import { Point } from "./math.js";
const mouse = {
    buttons: new Set(),
    x: 0,
    y: 0
};
addEventListener('mousedown', e => {
    mouse.buttons.add(e.button);
});
addEventListener('mouseup', e => {
    mouse.buttons.delete(e.button);
});
let memory = null;
addEventListener('mousemove', e => {
    mouse.x = e.clientX;
    mouse.y = e.clientY;
});
export const Mouse = {
    isPressed: (button) => mouse.buttons.has(button),
    getPosition: () => {
        if (!memory) {
            memory = getCanvasInstance();
        }
        const rect = memory.tag.getBoundingClientRect();
        const ratio = [
            memory.width / rect.width,
            memory.height / rect.height
        ];
        return new Point(mouse.x - rect.left * ratio[0], mouse.y - rect.top * ratio[1]);
    }
};
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibW91c2UuanMiLCJzb3VyY2VSb290IjoiamUtc3JjLyIsInNvdXJjZXMiOlsibW91c2UudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUEsT0FBTyxFQUFVLGlCQUFpQixFQUFFLE1BQU0sYUFBYSxDQUFBO0FBQ3ZELE9BQU8sRUFBRSxLQUFLLEVBQUUsTUFBTSxXQUFXLENBQUE7QUFRakMsTUFBTSxLQUFLLEdBQWM7SUFDckIsT0FBTyxFQUFFLElBQUksR0FBRyxFQUFFO0lBQ2xCLENBQUMsRUFBRSxDQUFDO0lBQ0osQ0FBQyxFQUFFLENBQUM7Q0FDUCxDQUFBO0FBRUQsZ0JBQWdCLENBQUMsV0FBVyxFQUFFLENBQUMsQ0FBQyxFQUFFO0lBQzlCLEtBQUssQ0FBQyxPQUFPLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQyxNQUFNLENBQUMsQ0FBQztBQUNoQyxDQUFDLENBQUMsQ0FBQTtBQUVGLGdCQUFnQixDQUFDLFNBQVMsRUFBRSxDQUFDLENBQUMsRUFBRTtJQUM1QixLQUFLLENBQUMsT0FBTyxDQUFDLE1BQU0sQ0FBQyxDQUFDLENBQUMsTUFBTSxDQUFDLENBQUM7QUFDbkMsQ0FBQyxDQUFDLENBQUE7QUFFRixJQUFJLE1BQU0sR0FBa0IsSUFBSSxDQUFDO0FBRWpDLGdCQUFnQixDQUFDLFdBQVcsRUFBRSxDQUFDLENBQUMsRUFBRTtJQUM5QixLQUFLLENBQUMsQ0FBQyxHQUFHLENBQUMsQ0FBQyxPQUFPLENBQUM7SUFDcEIsS0FBSyxDQUFDLENBQUMsR0FBRyxDQUFDLENBQUMsT0FBTyxDQUFDO0FBQ3hCLENBQUMsQ0FBQyxDQUFBO0FBRUYsTUFBTSxDQUFDLE1BQU0sS0FBSyxHQUFHO0lBQ2pCLFNBQVMsRUFBRSxDQUFDLE1BQWMsRUFBRSxFQUFFLENBQUMsS0FBSyxDQUFDLE9BQU8sQ0FBQyxHQUFHLENBQUMsTUFBTSxDQUFDO0lBRXhELFdBQVcsRUFBRSxHQUFHLEVBQUU7UUFDZCxJQUFJLENBQUMsTUFBTSxFQUFFO1lBQ1QsTUFBTSxHQUFHLGlCQUFpQixFQUFFLENBQUM7U0FDaEM7UUFDRCxNQUFNLElBQUksR0FBRyxNQUFNLENBQUMsR0FBRyxDQUFDLHFCQUFxQixFQUFFLENBQUM7UUFDaEQsTUFBTSxLQUFLLEdBQUc7WUFDVixNQUFNLENBQUMsS0FBSyxHQUFHLElBQUksQ0FBQyxLQUFLO1lBQ3pCLE1BQU0sQ0FBQyxNQUFNLEdBQUcsSUFBSSxDQUFDLE1BQU07U0FDOUIsQ0FBQTtRQUNELE9BQU8sSUFBSSxLQUFLLENBQ1osS0FBSyxDQUFDLENBQUMsR0FBRyxJQUFJLENBQUMsSUFBSSxHQUFHLEtBQUssQ0FBQyxDQUFDLENBQUMsRUFDOUIsS0FBSyxDQUFDLENBQUMsR0FBRyxJQUFJLENBQUMsR0FBRyxHQUFJLEtBQUssQ0FBQyxDQUFDLENBQUMsQ0FDakMsQ0FBQTtJQUNMLENBQUM7Q0FDSyxDQUFDIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgQ2FudmFzLCBnZXRDYW52YXNJbnN0YW5jZSB9IGZyb20gXCIuL2NhbnZhcy5qc1wiXHJcbmltcG9ydCB7IFBvaW50IH0gZnJvbSBcIi4vbWF0aC5qc1wiXHJcblxyXG50eXBlIE1vdXNlVHlwZSA9IHtcclxuICAgIGJ1dHRvbnM6IFNldDxudW1iZXI+LFxyXG4gICAgeDogbnVtYmVyLFxyXG4gICAgeTogbnVtYmVyXHJcbn1cclxuXHJcbmNvbnN0IG1vdXNlOiBNb3VzZVR5cGUgPSB7XHJcbiAgICBidXR0b25zOiBuZXcgU2V0KCksXHJcbiAgICB4OiAwLFxyXG4gICAgeTogMFxyXG59XHJcblxyXG5hZGRFdmVudExpc3RlbmVyKCdtb3VzZWRvd24nLCBlID0+IHtcclxuICAgIG1vdXNlLmJ1dHRvbnMuYWRkKGUuYnV0dG9uKTtcclxufSlcclxuXHJcbmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNldXAnLCBlID0+IHtcclxuICAgIG1vdXNlLmJ1dHRvbnMuZGVsZXRlKGUuYnV0dG9uKTtcclxufSlcclxuXHJcbmxldCBtZW1vcnk6IENhbnZhcyB8IG51bGwgPSBudWxsO1xyXG5cclxuYWRkRXZlbnRMaXN0ZW5lcignbW91c2Vtb3ZlJywgZSA9PiB7XHJcbiAgICBtb3VzZS54ID0gZS5jbGllbnRYO1xyXG4gICAgbW91c2UueSA9IGUuY2xpZW50WTtcclxufSlcclxuXHJcbmV4cG9ydCBjb25zdCBNb3VzZSA9IHtcclxuICAgIGlzUHJlc3NlZDogKGJ1dHRvbjogbnVtYmVyKSA9PiBtb3VzZS5idXR0b25zLmhhcyhidXR0b24pLFxyXG5cclxuICAgIGdldFBvc2l0aW9uOiAoKSA9PiB7XHJcbiAgICAgICAgaWYgKCFtZW1vcnkpIHtcclxuICAgICAgICAgICAgbWVtb3J5ID0gZ2V0Q2FudmFzSW5zdGFuY2UoKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgY29uc3QgcmVjdCA9IG1lbW9yeS50YWcuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7XHJcbiAgICAgICAgY29uc3QgcmF0aW8gPSBbXHJcbiAgICAgICAgICAgIG1lbW9yeS53aWR0aCAvIHJlY3Qud2lkdGgsXHJcbiAgICAgICAgICAgIG1lbW9yeS5oZWlnaHQgLyByZWN0LmhlaWdodFxyXG4gICAgICAgIF1cclxuICAgICAgICByZXR1cm4gbmV3IFBvaW50KFxyXG4gICAgICAgICAgICBtb3VzZS54IC0gcmVjdC5sZWZ0ICogcmF0aW9bMF0sXHJcbiAgICAgICAgICAgIG1vdXNlLnkgLSByZWN0LnRvcCAgKiByYXRpb1sxXVxyXG4gICAgICAgIClcclxuICAgIH1cclxufSBhcyBjb25zdDsiXX0=