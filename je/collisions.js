import { getCanvasInstance } from "./canvas.js";
export const Collisions = {
    pointToPoint: (a, b) => a.x == b.x && a.y == b.y,
    pointToRect: (a, b, addSize = false, debug = false) => {
        if (addSize) {
            b.x += b.width;
            b.y += b.height;
        }
        if (debug) {
            const { ctx } = getCanvasInstance();
            ctx.strokeStyle = 'rgb(255, 0, 0)';
            ctx.strokeRect(a.x, a.y, 10, 10);
            ctx.strokeStyle = 'rgb(0, 255, 0)';
            ctx.strokeRect(b.x, b.y, b.width, b.height);
        }
        return a.x <= b.x && b.x <= a.x + b.width && a.y <= b.y && b.y <= a.y + b.height;
    },
    checkCollision: (a, b, xs, ys, options) => {
        const { subPos, debug } = options;
        let { x: x2, y: y2 } = b;
        if (subPos) {
            x2 -= b.width / 2;
            y2 -= b.height / 2;
        }
        if (debug) {
            const { ctx } = getCanvasInstance();
            ctx.strokeStyle = 'rgb(0, 0, 255)';
            ctx.strokeRect(a.x, a.y, a.width, a.height);
            ctx.strokeStyle = 'rgb(255, 0, 0)';
            ctx.strokeRect(x2, y2, b.width, b.height);
        }
        let { x, y } = a;
        x += xs;
        y += ys;
        if (debug) {
            const { ctx } = getCanvasInstance();
            ctx.strokeStyle = 'rgb(0, 255, 0)';
            ctx.strokeRect(x, y, a.width, a.height);
        }
        return (x + a.width >= x2 &&
            x <= x2 + b.width &&
            y + a.height >= y2 &&
            y <= y2 + b.height);
    }
};
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiY29sbGlzaW9ucy5qcyIsInNvdXJjZVJvb3QiOiJqZS1zcmMvIiwic291cmNlcyI6WyJjb2xsaXNpb25zLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBLE9BQU8sRUFBRSxpQkFBaUIsRUFBRSxNQUFNLGFBQWEsQ0FBQztBQUdoRCxNQUFNLENBQUMsTUFBTSxVQUFVLEdBQUc7SUFDdEIsWUFBWSxFQUFFLENBQUMsQ0FBUSxFQUFFLENBQVEsRUFBRSxFQUFFLENBQUMsQ0FBQyxDQUFDLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUM7SUFDOUQsV0FBVyxFQUFFLENBQUMsQ0FBUSxFQUFFLENBQU8sRUFBRSxPQUFPLEdBQUcsS0FBSyxFQUFFLEtBQUssR0FBRyxLQUFLLEVBQUUsRUFBRTtRQUMvRCxJQUFJLE9BQU8sRUFBRTtZQUNULENBQUMsQ0FBQyxDQUFDLElBQUksQ0FBQyxDQUFDLEtBQUssQ0FBQztZQUNmLENBQUMsQ0FBQyxDQUFDLElBQUksQ0FBQyxDQUFDLE1BQU0sQ0FBQztTQUNuQjtRQUNELElBQUksS0FBSyxFQUFFO1lBQ1AsTUFBTSxFQUFFLEdBQUcsRUFBRSxHQUFHLGlCQUFpQixFQUFFLENBQUM7WUFDcEMsR0FBRyxDQUFDLFdBQVcsR0FBRyxnQkFBZ0IsQ0FBQztZQUNuQyxHQUFHLENBQUMsVUFBVSxDQUFDLENBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUMsRUFBRSxFQUFFLEVBQUUsRUFBRSxDQUFDLENBQUM7WUFDakMsR0FBRyxDQUFDLFdBQVcsR0FBRyxnQkFBZ0IsQ0FBQztZQUNuQyxHQUFHLENBQUMsVUFBVSxDQUFDLENBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUMsRUFBRSxDQUFDLENBQUMsS0FBSyxFQUFFLENBQUMsQ0FBQyxNQUFNLENBQUMsQ0FBQztTQUMvQztRQUNELE9BQU8sQ0FBQyxDQUFDLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUMsR0FBRyxDQUFDLENBQUMsS0FBSyxJQUFJLENBQUMsQ0FBQyxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxDQUFDLE1BQU0sQ0FBQztJQUNyRixDQUFDO0lBQ0QsY0FBYyxFQUFFLENBQUMsQ0FBTyxFQUFFLENBQU8sRUFBRSxFQUFVLEVBQUUsRUFBVSxFQUFFLE9BQThDLEVBQUUsRUFBRTtRQUN6RyxNQUFNLEVBQUUsTUFBTSxFQUFFLEtBQUssRUFBRSxHQUFHLE9BQU8sQ0FBQztRQUNsQyxJQUFJLEVBQUUsQ0FBQyxFQUFFLEVBQUUsRUFBRSxDQUFDLEVBQUUsRUFBRSxFQUFFLEdBQUcsQ0FBQyxDQUFDO1FBQ3pCLElBQUksTUFBTSxFQUFFO1lBQ1IsRUFBRSxJQUFJLENBQUMsQ0FBQyxLQUFLLEdBQUcsQ0FBQyxDQUFDO1lBQ2xCLEVBQUUsSUFBSSxDQUFDLENBQUMsTUFBTSxHQUFHLENBQUMsQ0FBQztTQUN0QjtRQUNELElBQUksS0FBSyxFQUFFO1lBQ1AsTUFBTSxFQUFFLEdBQUcsRUFBRSxHQUFHLGlCQUFpQixFQUFFLENBQUM7WUFDcEMsR0FBRyxDQUFDLFdBQVcsR0FBRyxnQkFBZ0IsQ0FBQztZQUNuQyxHQUFHLENBQUMsVUFBVSxDQUFDLENBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUMsRUFBRSxDQUFDLENBQUMsS0FBSyxFQUFFLENBQUMsQ0FBQyxNQUFNLENBQUMsQ0FBQztZQUM1QyxHQUFHLENBQUMsV0FBVyxHQUFHLGdCQUFnQixDQUFDO1lBQ25DLEdBQUcsQ0FBQyxVQUFVLENBQUMsRUFBRSxFQUFFLEVBQUUsRUFBRSxDQUFDLENBQUMsS0FBSyxFQUFFLENBQUMsQ0FBQyxNQUFNLENBQUMsQ0FBQztTQUM3QztRQUNELElBQUksRUFBRSxDQUFDLEVBQUUsQ0FBQyxFQUFFLEdBQUcsQ0FBQyxDQUFDO1FBQ2pCLENBQUMsSUFBSSxFQUFFLENBQUM7UUFDUixDQUFDLElBQUksRUFBRSxDQUFDO1FBQ1IsSUFBSSxLQUFLLEVBQUU7WUFDUCxNQUFNLEVBQUUsR0FBRyxFQUFFLEdBQUcsaUJBQWlCLEVBQUUsQ0FBQztZQUNwQyxHQUFHLENBQUMsV0FBVyxHQUFHLGdCQUFnQixDQUFDO1lBQ25DLEdBQUcsQ0FBQyxVQUFVLENBQUMsQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDLENBQUMsS0FBSyxFQUFFLENBQUMsQ0FBQyxNQUFNLENBQUMsQ0FBQztTQUMzQztRQUNELE9BQU8sQ0FDSCxDQUFDLEdBQUcsQ0FBQyxDQUFDLEtBQUssSUFBSyxFQUFFO1lBQ2xCLENBQUMsSUFBZSxFQUFFLEdBQUcsQ0FBQyxDQUFDLEtBQUs7WUFDNUIsQ0FBQyxHQUFHLENBQUMsQ0FBQyxNQUFNLElBQUksRUFBRTtZQUNsQixDQUFDLElBQWUsRUFBRSxHQUFHLENBQUMsQ0FBQyxNQUFNLENBQ2hDLENBQUM7SUFDTixDQUFDO0NBQ0ssQ0FBQyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IGdldENhbnZhc0luc3RhbmNlIH0gZnJvbSBcIi4vY2FudmFzLmpzXCI7XHJcbmltcG9ydCB7IFBvaW50LCBSZWN0IH0gZnJvbSBcIi4vbWF0aC5qc1wiO1xyXG5cclxuZXhwb3J0IGNvbnN0IENvbGxpc2lvbnMgPSB7XHJcbiAgICBwb2ludFRvUG9pbnQ6IChhOiBQb2ludCwgYjogUG9pbnQpID0+IGEueCA9PSBiLnggJiYgYS55ID09IGIueSxcclxuICAgIHBvaW50VG9SZWN0OiAoYTogUG9pbnQsIGI6IFJlY3QsIGFkZFNpemUgPSBmYWxzZSwgZGVidWcgPSBmYWxzZSkgPT4ge1xyXG4gICAgICAgIGlmIChhZGRTaXplKSB7XHJcbiAgICAgICAgICAgIGIueCArPSBiLndpZHRoO1xyXG4gICAgICAgICAgICBiLnkgKz0gYi5oZWlnaHQ7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmIChkZWJ1Zykge1xyXG4gICAgICAgICAgICBjb25zdCB7IGN0eCB9ID0gZ2V0Q2FudmFzSW5zdGFuY2UoKTtcclxuICAgICAgICAgICAgY3R4LnN0cm9rZVN0eWxlID0gJ3JnYigyNTUsIDAsIDApJztcclxuICAgICAgICAgICAgY3R4LnN0cm9rZVJlY3QoYS54LCBhLnksIDEwLCAxMCk7XHJcbiAgICAgICAgICAgIGN0eC5zdHJva2VTdHlsZSA9ICdyZ2IoMCwgMjU1LCAwKSc7XHJcbiAgICAgICAgICAgIGN0eC5zdHJva2VSZWN0KGIueCwgYi55LCBiLndpZHRoLCBiLmhlaWdodCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBhLnggPD0gYi54ICYmIGIueCA8PSBhLnggKyBiLndpZHRoICYmIGEueSA8PSBiLnkgJiYgYi55IDw9IGEueSArIGIuaGVpZ2h0O1xyXG4gICAgfSxcclxuICAgIGNoZWNrQ29sbGlzaW9uOiAoYTogUmVjdCwgYjogUmVjdCwgeHM6IG51bWJlciwgeXM6IG51bWJlciwgb3B0aW9uczogeyBzdWJQb3M/OiBib29sZWFuLCBkZWJ1Zz86IGJvb2xlYW4gfSkgPT4ge1xyXG4gICAgICAgIGNvbnN0IHsgc3ViUG9zLCBkZWJ1ZyB9ID0gb3B0aW9ucztcclxuICAgICAgICBsZXQgeyB4OiB4MiwgeTogeTIgfSA9IGI7XHJcbiAgICAgICAgaWYgKHN1YlBvcykge1xyXG4gICAgICAgICAgICB4MiAtPSBiLndpZHRoIC8gMjtcclxuICAgICAgICAgICAgeTIgLT0gYi5oZWlnaHQgLyAyO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAoZGVidWcpIHtcclxuICAgICAgICAgICAgY29uc3QgeyBjdHggfSA9IGdldENhbnZhc0luc3RhbmNlKCk7XHJcbiAgICAgICAgICAgIGN0eC5zdHJva2VTdHlsZSA9ICdyZ2IoMCwgMCwgMjU1KSc7XHJcbiAgICAgICAgICAgIGN0eC5zdHJva2VSZWN0KGEueCwgYS55LCBhLndpZHRoLCBhLmhlaWdodCk7XHJcbiAgICAgICAgICAgIGN0eC5zdHJva2VTdHlsZSA9ICdyZ2IoMjU1LCAwLCAwKSc7XHJcbiAgICAgICAgICAgIGN0eC5zdHJva2VSZWN0KHgyLCB5MiwgYi53aWR0aCwgYi5oZWlnaHQpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBsZXQgeyB4LCB5IH0gPSBhO1xyXG4gICAgICAgIHggKz0geHM7XHJcbiAgICAgICAgeSArPSB5cztcclxuICAgICAgICBpZiAoZGVidWcpIHtcclxuICAgICAgICAgICAgY29uc3QgeyBjdHggfSA9IGdldENhbnZhc0luc3RhbmNlKCk7XHJcbiAgICAgICAgICAgIGN0eC5zdHJva2VTdHlsZSA9ICdyZ2IoMCwgMjU1LCAwKSc7XHJcbiAgICAgICAgICAgIGN0eC5zdHJva2VSZWN0KHgsIHksIGEud2lkdGgsIGEuaGVpZ2h0KTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIChcclxuICAgICAgICAgICAgeCArIGEud2lkdGggID49IHgyICAgICAgICAgICAmJlxyXG4gICAgICAgICAgICB4ICAgICAgICAgICAgPD0geDIgKyBiLndpZHRoICYmXHJcbiAgICAgICAgICAgIHkgKyBhLmhlaWdodCA+PSB5MiAgICAgICAgICAgJiZcclxuICAgICAgICAgICAgeSAgICAgICAgICAgIDw9IHkyICsgYi5oZWlnaHRcclxuICAgICAgICApO1xyXG4gICAgfVxyXG59IGFzIGNvbnN0OyJdfQ==