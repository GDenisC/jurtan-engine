{"version":3,"file":"collisions.js","sourceRoot":"je-src/","sources":["collisions.ts"],"names":[],"mappings":"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","sourcesContent":["import { getCanvasInstance } from \"./canvas.js\";\nimport { Point, Rect } from \"./math.js\";\n\nexport const Collisions = {\n    pointToPoint: (a: Point, b: Point) => a.x == b.x && a.y == b.y,\n    pointToRect: (a: Point, b: Rect, addSize = false, debug = false) => {\n        if (addSize) {\n            b.x += b.width;\n            b.y += b.height;\n        }\n        if (debug) {\n            const { ctx } = getCanvasInstance();\n            ctx.strokeStyle = 'rgb(255, 0, 0)';\n            ctx.strokeRect(a.x, a.y, 10, 10);\n            ctx.strokeStyle = 'rgb(0, 255, 0)';\n            ctx.strokeRect(b.x, b.y, b.width, b.height);\n        }\n        return a.x <= b.x && b.x <= a.x + b.width && a.y <= b.y && b.y <= a.y + b.height;\n    },\n    checkCollision: (a: Rect, b: Rect, xs: number, ys: number, options: { subPos?: boolean, debug?: boolean }) => {\n        const { subPos, debug } = options;\n        let { x: x2, y: y2 } = b;\n        if (subPos) {\n            x2 -= b.width / 2;\n            y2 -= b.height / 2;\n        }\n        if (debug) {\n            const { ctx } = getCanvasInstance();\n            ctx.strokeStyle = 'rgb(0, 0, 255)';\n            ctx.strokeRect(a.x, a.y, a.width, a.height);\n            ctx.strokeStyle = 'rgb(255, 0, 0)';\n            ctx.strokeRect(x2, y2, b.width, b.height);\n        }\n        let { x, y } = a;\n        x += xs;\n        y += ys;\n        if (debug) {\n            const { ctx } = getCanvasInstance();\n            ctx.strokeStyle = 'rgb(0, 255, 0)';\n            ctx.strokeRect(x, y, a.width, a.height);\n        }\n        return (\n            x + a.width  >= x2           &&\n            x            <= x2 + b.width &&\n            y + a.height >= y2           &&\n            y            <= y2 + b.height\n        );\n    }\n} as const;"]}